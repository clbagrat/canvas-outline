var x=Object.defineProperty;var H=(e,t,r)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var v=(e,t,r)=>(H(e,typeof t!="symbol"?t+"":t,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();const G="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHUobyx0LGUsZil7aWYodDwwfHx0PmV8fG88MClyZXR1cm4gbnVsbDtsZXQgbD0odCtvKmUpKjQ7cmV0dXJuIGw+PWY/bnVsbDpsfWZ1bmN0aW9uKmcobyx0LGUsZil7bGV0IGw9dC80JWUscz1NYXRoLmZsb29yKHQvNC9lKSxpPVtdO2ZvcihsZXQgbj0xO248PWY7bis9MSlmb3IobGV0IHI9bC1mO3I8PWwrZjtyKz0xKWkucHVzaChbcy1uLHJdKSxyIT09bCYmaS5wdXNoKFtzLHJdKSxpLnB1c2goW3MrbixyXSk7Zm9yKGxldFtuLHJdb2YgaSl7bGV0IGE9dShuLHIsZSxvLmxlbmd0aCk7YSE9PW51bGwmJm9bYSszXT4wJiYoeWllbGR7aW5kZXg6YX0pfX1mdW5jdGlvbip5KG8sdCxlLGYsbCl7Y29uc3Qgcz10LmNvbmNhdChvLGUpLGk9dC5sZW5ndGgsbj1zLmxlbmd0aC1lLmxlbmd0aDtmb3IobGV0IHI9aTtyPG47cis9NClpZihzW3IrM109PT0wKWZvcihsZXQgYSBvZiBnKHMscixmLGwpKXt5aWVsZHtpbmRleDpyLWl9O2JyZWFrfX1mdW5jdGlvbiBwKG8pe3JldHVybntyOisoIjB4IitvWzFdK29bMl0pLGc6KygiMHgiK29bM10rb1s0XSksYjorKCIweCIrb1s1XStvWzZdKX19b25tZXNzYWdlPSh7ZGF0YTpvfSk9Pntjb25zdHtpbWFnZURhdGE6dCxvdmVybGFwVG9wRGF0YTplLG92ZXJsYXBCb3R0b21EYXRhOmYsd2lkdGg6bCxzdHJva2VXaWR0aDpzLHN0cm9rZUNvbG9yOml9PW8sbj1wKGkpO2xldCByPW5ldyBVaW50OENsYW1wZWRBcnJheShBcnJheS5mcm9tKHQpKTtjb25zdCBhPUFycmF5LmZyb20odCksbT1BcnJheS5mcm9tKGUpLGI9QXJyYXkuZnJvbShmKTtmb3IobGV0e2luZGV4OmN9b2YgeShhLG0sYixsLHMpKXJbY109bi5yLHJbYysxXT1uLmcscltjKzJdPW4uYixyW2MrM109MjU1O3Bvc3RNZXNzYWdlKHtjbGFtcGVkQXJyYXk6cn0pfX0pKCk7Cg==",W=typeof window<"u"&&window.Blob&&new Blob([atob(G)],{type:"text/javascript;charset=utf-8"});function R(){const e=W&&(window.URL||window.webkitURL).createObjectURL(W);try{return e?new Worker(e):new Worker("data:application/javascript;base64,"+G)}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}const k=(e,t,r,l)=>{const o=e.getContext("2d"),n=document.createElement("img");n.src=t;const a=navigator.hardwareConcurrency;n.onload=()=>{const{width:s,height:i}=n;e.width=s,e.height=i,o.drawImage(n,0,0,s,i);const{data:u}=o.getImageData(0,0,s,i);let m=Math.floor(i/a),Z=performance.now();for(let c=0;c<a;c+=1){let d=c*m*s*4,h=m*s*4;c===a-1&&(h=u.length-d);let w=new R;const b=d+h;let I=u.slice(d,b),L=u.slice(d-r*s*4,d),S=u.slice(b,b+r*s*4);console.log({overlapTopData:L},d),w.postMessage({index:c,imageData:I,overlapTopData:L,overlapBottomData:S,width:s,strokeWidth:r,strokeColor:l}),w.onmessage=({data:Y})=>{let X=new ImageData(Y.clampedArray,s);o.putImageData(X,0,c*m),c===a-1&&console.log(performance.now()-Z)}}}};const g=document.querySelector(".drag-container"),J=document.querySelector("#drag-input"),D=document.querySelector(".drag-skip"),N=document.querySelector(".canvas-outline"),p=document.querySelector("canvas"),V=document.querySelector("#save-image"),z=document.querySelector("#back-home"),C=document.querySelector("#strokeWidth"),K=document.querySelector("#strokeColor");function y(){g.classList.toggle("hidden"),N.classList.toggle("hidden")}class B{constructor(){v(this,"reader");this.reader=new FileReader}open(t){!t||t.length===0||(this.reader.readAsDataURL(t[0]),this.reader.onload=r=>{var a;const l=(a=r.target)==null?void 0:a.result,o=+C.value,n=K.value;k(p,l,o,n),y()})}save(){const t=document.createElement("a");t.download=`canvas-outline-${Date.now()}.png`,t.href=p.toDataURL(),t.click(),t.remove()}}const f=new B;J.addEventListener("change",e=>{if(e.target&&e.target.constructor.name=="HTMLInputElement")return f.open(e.target.files),e.target.value="",e.preventDefault(),!1});V.addEventListener("click",()=>{f.save()});z.addEventListener("click",()=>{y()});D.addEventListener("click",()=>{const e=+C.value,t=K.value;k(p,"./pikachu.png",e,t),y()});g.addEventListener("drop",e=>{e.preventDefault();const t=e.dataTransfer,r=t==null?void 0:t.files;t&&r&&f.open(r)});g.addEventListener("dragover",e=>{e.preventDefault()});
