var J=Object.defineProperty;var D=(e,t,r)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var S=(e,t,r)=>(D(e,typeof t!="symbol"?t+"":t,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();const Z="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHUobyx0LGUsZil7aWYodDwwfHx0PmV8fG88MClyZXR1cm4gbnVsbDtsZXQgbD0odCtvKmUpKjQ7cmV0dXJuIGw+PWY/bnVsbDpsfWZ1bmN0aW9uKmcobyx0LGUsZil7bGV0IGw9dC80JWUscz1NYXRoLmZsb29yKHQvNC9lKSxpPVtdO2ZvcihsZXQgbj0xO248PWY7bis9MSlmb3IobGV0IHI9bC1mO3I8PWwrZjtyKz0xKWkucHVzaChbcy1uLHJdKSxyIT09bCYmaS5wdXNoKFtzLHJdKSxpLnB1c2goW3MrbixyXSk7Zm9yKGxldFtuLHJdb2YgaSl7bGV0IGE9dShuLHIsZSxvLmxlbmd0aCk7YSE9PW51bGwmJm9bYSszXT4wJiYoeWllbGR7aW5kZXg6YX0pfX1mdW5jdGlvbip5KG8sdCxlLGYsbCl7Y29uc3Qgcz10LmNvbmNhdChvLGUpLGk9dC5sZW5ndGgsbj1zLmxlbmd0aC1lLmxlbmd0aDtmb3IobGV0IHI9aTtyPG47cis9NClpZihzW3IrM109PT0wKWZvcihsZXQgYSBvZiBnKHMscixmLGwpKXt5aWVsZHtpbmRleDpyLWl9O2JyZWFrfX1mdW5jdGlvbiBwKG8pe3JldHVybntyOisoIjB4IitvWzFdK29bMl0pLGc6KygiMHgiK29bM10rb1s0XSksYjorKCIweCIrb1s1XStvWzZdKX19b25tZXNzYWdlPSh7ZGF0YTpvfSk9Pntjb25zdHtpbWFnZURhdGE6dCxvdmVybGFwVG9wRGF0YTplLG92ZXJsYXBCb3R0b21EYXRhOmYsd2lkdGg6bCxzdHJva2VXaWR0aDpzLHN0cm9rZUNvbG9yOml9PW8sbj1wKGkpO2xldCByPW5ldyBVaW50OENsYW1wZWRBcnJheShBcnJheS5mcm9tKHQpKTtjb25zdCBhPUFycmF5LmZyb20odCksbT1BcnJheS5mcm9tKGUpLGI9QXJyYXkuZnJvbShmKTtmb3IobGV0e2luZGV4OmN9b2YgeShhLG0sYixsLHMpKXJbY109bi5yLHJbYysxXT1uLmcscltjKzJdPW4uYixyW2MrM109MjU1O3Bvc3RNZXNzYWdlKHtjbGFtcGVkQXJyYXk6cn0pfX0pKCk7Cg==",K=typeof window<"u"&&window.Blob&&new Blob([atob(Z)],{type:"text/javascript;charset=utf-8"});function N(){const e=K&&(window.URL||window.webkitURL).createObjectURL(K);try{return e?new Worker(e):new Worker("data:application/javascript;base64,"+Z)}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}const g=(e,t,r,l)=>{const o=e.getContext("2d"),n=document.createElement("img");n.src=t;const a=navigator.hardwareConcurrency;n.onload=()=>{const{width:s,height:u}=n;e.width=s,e.height=u,o.drawImage(n,0,0,s,u);const{data:m}=o.getImageData(0,0,s,u);let v=Math.floor(u/a),Y=performance.now();for(let d=0;d<a;d+=1){let i=d*v*s*4,C=v*s*4;d===a-1&&(C=m.length-i);let y=new N;const f=i+C;let X=m.slice(i,f),I=m.slice(i-r*s*4,i),x=m.slice(f,f+r*s*4);console.log({overlapTopData:I},i),y.postMessage({index:d,imageData:X,overlapTopData:I,overlapBottomData:x,width:s,strokeWidth:r,strokeColor:l}),y.onmessage=({data:H})=>{let R=new ImageData(H.clampedArray,s);o.putImageData(R,0,d*v),d===a-1&&console.log(performance.now()-Y),y.terminate()}}}};const w=document.querySelector(".drag-container"),V=document.querySelector("#drag-input"),z=document.querySelector(".drag-skip"),B=document.querySelector(".canvas-outline"),c=document.querySelector("canvas"),U=document.querySelector("#save-image"),j=document.querySelector("#back-home"),L=document.querySelector("#strokeWidth"),b=document.querySelector("#strokeWidthInteractive");b.value=L.value;const W=document.querySelector("#strokeColor"),p=document.querySelector("#strokeColorInteractive");p.value=W.value;let h="./pikachu.png";function k(){w.classList.toggle("hidden"),B.classList.toggle("hidden")}class O{constructor(){S(this,"reader");this.reader=new FileReader}open(t){!t||t.length===0||(this.reader.readAsDataURL(t[0]),this.reader.onload=r=>{var a;const l=(a=r.target)==null?void 0:a.result;h=l;const o=+L.value,n=W.value;g(c,l,o,n),k()})}save(){const t=document.createElement("a");t.download=`canvas-outline-${Date.now()}.png`,t.href=c.toDataURL(),t.click(),t.remove()}}const G=new O;V.addEventListener("change",e=>{if(e.target&&e.target.constructor.name=="HTMLInputElement")return G.open(e.target.files),e.target.value="",e.preventDefault(),!1});U.addEventListener("click",()=>{G.save()});j.addEventListener("click",()=>{k()});z.addEventListener("click",()=>{const e=+L.value,t=W.value;g(c,h,e,t),k()});w.addEventListener("drop",e=>{e.preventDefault();const t=e.dataTransfer,r=t==null?void 0:t.files;t&&r&&G.open(r)});w.addEventListener("dragover",e=>{e.preventDefault()});b.addEventListener("change",()=>{const e=c.getContext("2d");e==null||e.clearRect(0,0,c.width,c.height),g(c,h,+b.value,p.value)});p.addEventListener("change",()=>{const e=c.getContext("2d");e==null||e.clearRect(0,0,c.width,c.height),g(c,h,+b.value,p.value)});
