var I=Object.defineProperty;var S=(e,t,r)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var f=(e,t,r)=>(S(e,typeof t!="symbol"?t+"":t,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();const k="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGMocixlLHQsbyl7aWYoZTwwfHxlPnR8fHI8MClyZXR1cm4gbnVsbDtsZXQgZj0oZStyKnQpKjQ7cmV0dXJuIGY+PW8/bnVsbDpmfWZ1bmN0aW9uKmcocixlLHQsbyl7bGV0IGY9ZS80JXQscz1NYXRoLmZsb29yKGUvNC90KSxuPVtdO2ZvcihsZXQgbD0xO2w8PW87bCs9MSlmb3IobGV0IGk9Zi1vO2k8ZitvO2krPTEpbi5wdXNoKFtzLWwsaV0pLGkhPT1mJiZuLnB1c2goW3MsaV0pLG4ucHVzaChbcytsLGldKTtmb3IobGV0W2wsaV1vZiBuKXtsZXQgdT1jKGwsaSx0LHIubGVuZ3RoKTt1IT09bnVsbCYmclt1KzNdPT09MCYmKHlpZWxke2luZGV4OnV9KX19ZnVuY3Rpb24qYShyLGUsdCl7Zm9yKGxldCBvPTA7bzxyLmxlbmd0aDtvKz00KWlmKHJbbyszXT4wKWZvcihsZXR7aW5kZXg6Zn1vZiBnKHIsbyxlLHQpKXlpZWxke2luZGV4OmZ9fWZ1bmN0aW9uIHkocil7cmV0dXJue3I6KygiMHgiK3JbMV0rclsyXSksZzorKCIweCIrclszXStyWzRdKSxiOisoIjB4IityWzVdK3JbNl0pfX1vbm1lc3NhZ2U9KHtkYXRhOnJ9KT0+e2NvbnN0e2ltYWdlRGF0YTplLHdpZHRoOnQsc3Ryb2tlV2lkdGg6byxzdHJva2VDb2xvcjpmfT1yLHM9eShmKTtsZXQgbj1uZXcgVWludDhDbGFtcGVkQXJyYXkoQXJyYXkuZnJvbShlKSk7Y29uc29sZS5sb2coe2ltYWdlRGF0YTplLGNsYW1wZWRBcnJheTpufSk7Zm9yKGxldHtpbmRleDpsfW9mIGEoZSx0LG8pKW5bbF09cy5yLG5bbCsxXT1zLmcsbltsKzJdPXMuYixuW2wrM109MjU1O3Bvc3RNZXNzYWdlKHtjbGFtcGVkQXJyYXk6bn0pfX0pKCk7Cg==",h=typeof window<"u"&&window.Blob&&new Blob([atob(k)],{type:"text/javascript;charset=utf-8"});function R(){const e=h&&(window.URL||window.webkitURL).createObjectURL(h);try{return e?new Worker(e):new Worker("data:application/javascript;base64,"+k)}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}const Z=(e,t,r,l)=>{const o=e.getContext("2d"),n=document.createElement("img");n.src=t;const c=navigator.hardwareConcurrency;n.onload=()=>{const{width:a,height:i}=n;e.width=a,e.height=i,o.drawImage(n,0,0,a,i);const{data:g}=o.getImageData(0,0,a,i);let d=Math.floor(i/c),K=performance.now();for(let s=0;s<c;s+=1){let u=s*d*a*4,p=d*a*4;s===c-1&&(p=g.length-u);let y=new R,W=g.slice(u,u+p);y.postMessage({index:s,imageData:W,width:a,strokeWidth:r,strokeColor:l}),y.onmessage=({data:X})=>{let G=new ImageData(X.clampedArray,a);o.putImageData(G,0,s*d),s===c-1&&console.log(performance.now()-K)}}}};const V=document.querySelector(".drag-container"),C=document.querySelector("#drag-input"),x=document.querySelector(".drag-skip"),H=document.querySelector(".canvas-outline"),m=document.querySelector("canvas"),Y=document.querySelector("#save-image"),N=document.querySelector("#back-home"),w=document.querySelector("#strokeWidth"),L=document.querySelector("#strokeColor");function b(){V.classList.toggle("hidden"),H.classList.toggle("hidden")}class T{constructor(){f(this,"reader");this.reader=new FileReader}open(t){!t||t.length===0||(this.reader.readAsDataURL(t[0]),this.reader.onload=r=>{var c;const l=(c=r.target)==null?void 0:c.result,o=+w.value,n=L.value;Z(m,l,o,n),b()})}save(){const t=document.createElement("a");t.download=`canvas-outline-${Date.now()}.png`,t.href=m.toDataURL(),t.click(),t.remove()}}const v=new T;C.addEventListener("change",e=>{if(e.target&&e.target.constructor.name=="HTMLInputElement")return v.open(e.target.files),e.target.value="",e.preventDefault(),!1});Y.addEventListener("click",()=>{v.save()});N.addEventListener("click",()=>{b()});x.addEventListener("click",()=>{const e=+w.value,t=L.value;Z(m,"./pikachu.png",e,t),b()});
