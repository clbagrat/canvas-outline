var I=Object.defineProperty;var S=(o,e,r)=>e in o?I(o,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[e]=r;var f=(o,e,r)=>(S(o,typeof e!="symbol"?e+"":e,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function r(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(t){if(t.ep)return;t.ep=!0;const n=r(t);fetch(t.href,n)}})();const k="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGMocixlLHQsbyl7aWYoZTwwfHxlPnR8fHI8MClyZXR1cm4gbnVsbDtsZXQgZj0oZStyKnQpKjQ7cmV0dXJuIGY+PW8/bnVsbDpmfWZ1bmN0aW9uKmcocixlLHQsbyl7bGV0IGY9ZS80JXQscz1NYXRoLmZsb29yKGUvNC90KSxuPVtdO2ZvcihsZXQgbD0xO2w8PW87bCs9MSlmb3IobGV0IGk9Zi1vO2k8ZitvO2krPTEpbi5wdXNoKFtzLWwsaV0pLGkhPT1mJiZuLnB1c2goW3MsaV0pLG4ucHVzaChbcytsLGldKTtmb3IobGV0W2wsaV1vZiBuKXtsZXQgdT1jKGwsaSx0LHIubGVuZ3RoKTt1IT09bnVsbCYmclt1KzNdPT09MCYmKHlpZWxke2luZGV4OnV9KX19ZnVuY3Rpb24qYShyLGUsdCl7Zm9yKGxldCBvPTA7bzxyLmxlbmd0aDtvKz00KWlmKHJbbyszXT4wKWZvcihsZXR7aW5kZXg6Zn1vZiBnKHIsbyxlLHQpKXlpZWxke2luZGV4OmZ9fWZ1bmN0aW9uIHkocil7cmV0dXJue3I6KygiMHgiK3JbMV0rclsyXSksZzorKCIweCIrclszXStyWzRdKSxiOisoIjB4IityWzVdK3JbNl0pfX1vbm1lc3NhZ2U9KHtkYXRhOnJ9KT0+e2NvbnN0e2ltYWdlRGF0YTplLHdpZHRoOnQsc3Ryb2tlV2lkdGg6byxzdHJva2VDb2xvcjpmfT1yLHM9eShmKTtsZXQgbj1uZXcgVWludDhDbGFtcGVkQXJyYXkoQXJyYXkuZnJvbShlKSk7Y29uc29sZS5sb2coe2ltYWdlRGF0YTplLGNsYW1wZWRBcnJheTpufSk7Zm9yKGxldHtpbmRleDpsfW9mIGEoZSx0LG8pKW5bbF09cy5yLG5bbCsxXT1zLmcsbltsKzJdPXMuYixuW2wrM109MjU1O3Bvc3RNZXNzYWdlKHtjbGFtcGVkQXJyYXk6bn0pfX0pKCk7Cg==",h=typeof window<"u"&&window.Blob&&new Blob([atob(k)],{type:"text/javascript;charset=utf-8"});function R(){const o=h&&(window.URL||window.webkitURL).createObjectURL(h);try{return o?new Worker(o):new Worker("data:application/javascript;base64,"+k)}finally{o&&(window.URL||window.webkitURL).revokeObjectURL(o)}}const Z=(o,e,r,l)=>{const t=o.getContext("2d"),n=document.createElement("img");n.src=e;const c=navigator.hardwareConcurrency;n.onload=()=>{const{width:s,height:i}=n;o.width=s,o.height=i,t.drawImage(n,0,0,s,i);const{data:g}=t.getImageData(0,0,s,i);let d=Math.floor(i/c),L=performance.now();for(let a=0;a<c;a+=1){let u=a*d*s*4,p=d*s*4;a===c-1&&(p=g.length-u);let y=new R,W=g.slice(u,u+p);y.postMessage({index:a,imageData:W,width:s,strokeWidth:r,strokeColor:l}),y.onmessage=({data:X})=>{let G=new ImageData(X.clampedArray,s);t.putImageData(G,0,a*d),a===c-1&&console.log(performance.now()-L)}}}};const V=document.querySelector(".drag-container"),C=document.querySelector("#drag-input"),x=document.querySelector(".drag-skip"),H=document.querySelector(".canvas-outline"),m=document.querySelector("canvas"),Y=document.querySelector("#save-image"),N=document.querySelector("#back-home"),w=document.querySelector("#strokeWidth"),v=document.querySelector("#strokeColor");function b(){V.classList.toggle("hidden"),H.classList.toggle("hidden")}class z{constructor(){f(this,"reader");this.reader=new FileReader}open(e){!e||e.length===0||(this.reader.readAsDataURL(e[0]),this.reader.onload=r=>{var c;const l=(c=r.target)==null?void 0:c.result,t=+w.value,n=v.value;Z(m,l,t,n),b()})}save(){const e=document.createElement("a");e.download=`canvas-outline-${Date.now()}.png`,e.href=m.toDataURL(),e.click(),e.remove()}}const K=new z;C.addEventListener("change",o=>{K.open(o.target.files)});Y.addEventListener("click",()=>{K.save()});N.addEventListener("click",()=>{b()});x.addEventListener("click",()=>{const o=+w.value,e=v.value;Z(m,"./pikachu.png",o,e),b()});
