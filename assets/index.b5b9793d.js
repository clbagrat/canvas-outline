var S=Object.defineProperty;var R=(e,t,r)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var k=(e,t,r)=>(R(e,typeof t!="symbol"?t+"":t,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();const w="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGMocixlLHQsbyl7aWYoZTwwfHxlPnR8fHI8MClyZXR1cm4gbnVsbDtsZXQgZj0oZStyKnQpKjQ7cmV0dXJuIGY+PW8/bnVsbDpmfWZ1bmN0aW9uKmcocixlLHQsbyl7bGV0IGY9ZS80JXQscz1NYXRoLmZsb29yKGUvNC90KSxuPVtdO2ZvcihsZXQgbD0xO2w8PW87bCs9MSlmb3IobGV0IGk9Zi1vO2k8ZitvO2krPTEpbi5wdXNoKFtzLWwsaV0pLGkhPT1mJiZuLnB1c2goW3MsaV0pLG4ucHVzaChbcytsLGldKTtmb3IobGV0W2wsaV1vZiBuKXtsZXQgdT1jKGwsaSx0LHIubGVuZ3RoKTt1IT09bnVsbCYmclt1KzNdPT09MCYmKHlpZWxke2luZGV4OnV9KX19ZnVuY3Rpb24qYShyLGUsdCl7Zm9yKGxldCBvPTA7bzxyLmxlbmd0aDtvKz00KWlmKHJbbyszXT4wKWZvcihsZXR7aW5kZXg6Zn1vZiBnKHIsbyxlLHQpKXlpZWxke2luZGV4OmZ9fWZ1bmN0aW9uIHkocil7cmV0dXJue3I6KygiMHgiK3JbMV0rclsyXSksZzorKCIweCIrclszXStyWzRdKSxiOisoIjB4IityWzVdK3JbNl0pfX1vbm1lc3NhZ2U9KHtkYXRhOnJ9KT0+e2NvbnN0e2ltYWdlRGF0YTplLHdpZHRoOnQsc3Ryb2tlV2lkdGg6byxzdHJva2VDb2xvcjpmfT1yLHM9eShmKTtsZXQgbj1uZXcgVWludDhDbGFtcGVkQXJyYXkoQXJyYXkuZnJvbShlKSk7Y29uc29sZS5sb2coe2ltYWdlRGF0YTplLGNsYW1wZWRBcnJheTpufSk7Zm9yKGxldHtpbmRleDpsfW9mIGEoZSx0LG8pKW5bbF09cy5yLG5bbCsxXT1zLmcsbltsKzJdPXMuYixuW2wrM109MjU1O3Bvc3RNZXNzYWdlKHtjbGFtcGVkQXJyYXk6bn0pfX0pKCk7Cg==",Z=typeof window<"u"&&window.Blob&&new Blob([atob(w)],{type:"text/javascript;charset=utf-8"});function V(){const e=Z&&(window.URL||window.webkitURL).createObjectURL(Z);try{return e?new Worker(e):new Worker("data:application/javascript;base64,"+w)}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}const v=(e,t,r,l)=>{const o=e.getContext("2d"),n=document.createElement("img");n.src=t;const a=navigator.hardwareConcurrency;n.onload=()=>{const{width:s,height:i}=n;e.width=s,e.height=i,o.drawImage(n,0,0,s,i);const{data:f}=o.getImageData(0,0,s,i);let d=Math.floor(i/a),W=performance.now();for(let c=0;c<a;c+=1){let u=c*d*s*4,y=d*s*4;c===a-1&&(y=f.length-u);let h=new V,X=f.slice(u,u+y);h.postMessage({index:c,imageData:X,width:s,strokeWidth:r,strokeColor:l}),h.onmessage=({data:G})=>{let I=new ImageData(G.clampedArray,s);o.putImageData(I,0,c*d),c===a-1&&console.log(performance.now()-W)}}}};const b=document.querySelector(".drag-container"),C=document.querySelector("#drag-input"),x=document.querySelector(".drag-skip"),H=document.querySelector(".canvas-outline"),m=document.querySelector("canvas"),Y=document.querySelector("#save-image"),N=document.querySelector("#back-home"),L=document.querySelector("#strokeWidth"),K=document.querySelector("#strokeColor");function g(){b.classList.toggle("hidden"),H.classList.toggle("hidden")}class T{constructor(){k(this,"reader");this.reader=new FileReader}open(t){!t||t.length===0||(this.reader.readAsDataURL(t[0]),this.reader.onload=r=>{var a;const l=(a=r.target)==null?void 0:a.result,o=+L.value,n=K.value;v(m,l,o,n),g()})}save(){const t=document.createElement("a");t.download=`canvas-outline-${Date.now()}.png`,t.href=m.toDataURL(),t.click(),t.remove()}}const p=new T;C.addEventListener("change",e=>{if(e.target&&e.target.constructor.name=="HTMLInputElement")return p.open(e.target.files),e.target.value="",e.preventDefault(),!1});Y.addEventListener("click",()=>{p.save()});N.addEventListener("click",()=>{g()});x.addEventListener("click",()=>{const e=+L.value,t=K.value;v(m,"./pikachu.png",e,t),g()});b.addEventListener("drop",e=>{e.preventDefault();const t=e.dataTransfer,r=t==null?void 0:t.files;t&&r&&p.open(r)});b.addEventListener("dragover",e=>{e.preventDefault()});
